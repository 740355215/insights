#!/usr/bin/env ts-node

// Thanks to https://github.com/mysamai/mysam/blob/master/bin/mysam for this script!

var fs = require('fs')
var path = require('path')
var program = require('commander')
var root = path.join(__dirname, '..')
var pkg = require(path.join(root, 'package.json'))

program.version(pkg.version)
  .usage('<command> [options]')
  .description('Run insights static html server')
  .option('-p, --port [number]', 'Port in server mode. Defaults to 8080')
  .option('--public [folder]', 'HTML folder to server. Defaults to ../insights-web/build')

process.env.INSIGHTS_WEB_PUBLIC = program.public || path.join('..', 'insights-web', 'build')

if (program.port) {
  process.env.INSIGHTS_WEB_PORT = program.port
}

require('../app/start-web')
